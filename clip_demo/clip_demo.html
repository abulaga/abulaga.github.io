<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
    body {
        position: relative;
    }        
        .sensor {
            position: absolute;
            top: 0;
            left: 0;
            width: 1000px;
            height: 800px;
        }

        .circle {
            position: absolute;
            width: 600px;
            height: 600px;
            background-color: rgba(255, 255, 255, 0.33);
            border-radius: 50%;
            top: 50%;
            left: 50%;           
            transform: translate(-50%,-50%); 
        }
        .pic {
            position: absolute;
            top: 0;
            left: 0;
            background-image: url('https://i.ytimg.com/vi/TlD6zY3udmw/maxresdefault.jpg');
            background-position: center;
            background-size: cover;
            width: 1000px;
            height: 800px;
            animation-fill-mode:  forwards;
            clip-path: polygon(0% 0%,
                    0% 0%,
                    33% 0%,
                    33% 20%,
                    0% 20%,
                    0% 0%,
                    0% 0%,

                    0% 40%,
                    66% 40%,
                    100% 40%,
                    100% 60%,
                    66% 60%,
                    66% 40%,
                    0% 40%,


                    0% 80%,
                    0% 80%,
                    33% 80%,
                    33% 100%,
                    0% 100%,
                    0% 80%,
                    0% 80%);

        }

        .pic.change1_2 {
            animation: change1_2 2s forwards;
          
        }
        
        .pic.change2_3 {
            animation: change2_3 2s forwards;
          
        }
        
        .pic.change3_1 {
            animation: change3_1 2s forwards;
          
        }
        @keyframes change1_2 {
            from {
                clip-path: polygon(0% 0%,
                        0% 0%,
                        33% 0%,
                        33% 20%,
                        0% 20%,
                        0% 0%,
                        0% 0%,

                        0% 40%,
                        66% 40%,
                        100% 40%,
                        100% 60%,
                        66% 60%,
                        66% 40%,
                        0% 40%,


                        0% 80%,
                        0% 80%,
                        33% 80%,
                        33% 100%,
                        0% 100%,
                        0% 80%,
                        0% 80%);
            }
            to {
                clip-path: polygon(0% 0%,
                        66% 0%,
                        100% 0%,
                        100% 20%,
                        66% 20%,
                        66% 0%,
                        0% 0%,

                        0% 40%,
                        0% 40%,
                        66% 40%,
                        66% 60%,
                        0% 60%,
                        0% 40%,
                        0% 40%,


                        0% 80%,
                        33% 80%,
                        66% 80%,
                        66% 100%,
                        33% 100%,
                        33% 80%,
                        0% 80%);
            }
        }
        @keyframes change2_3 {
            from {
                clip-path: polygon(0% 0%,66% 0%,100% 0%,100% 20%,66% 20%,66% 0%,0% 0%,0% 40%,0% 40%,66% 40%,66% 60%,0% 60%,0% 40%,0% 40%,0% 80%,33% 80%,66% 80%,66% 100%,33% 100%,33% 80%,0% 80%);
            }
            to {
                clip-path: polygon(0% 0%,33% 0%,66% 0%,66% 20%,33% 20%,33% 0%,0% 0%,0% 40%,33% 40%,100% 40%,100% 60%,33% 60%,33% 40%,0% 40%,0% 80%,0% 80%,66% 80%,66% 100%,0% 100%,0% 80%,0% 80%);
            }
        }
        @keyframes change3_1 {
            from {
                clip-path: polygon(0% 0%,
                        33% 0%,
                        66% 0%,
                        66% 20%,
                        33% 20%,
                        33% 0%,
                        0% 0%,

                        0% 40%,
                        33% 40%,
                        100% 40%,
                        100% 60%,
                        33% 60%,
                        33% 40%,
                        0% 40%,

                        0% 80%,
                        0% 80%,
                        66% 80%,
                        66% 100%,
                        0% 100%,
                        0% 80%,
                        0% 80%);
            }
            to {
                clip-path: polygon(0% 0%,
                        0% 0%,
                        33% 0%,
                        33% 20%,
                        0% 20%,
                        0% 0%,
                        0% 0%,

                        0% 40%,
                        66% 40%,
                        100% 40%,
                        100% 60%,
                        66% 60%,
                        66% 40%,
                        0% 40%,

                        0% 80%,
                        0% 80%,
                        33% 80%,
                        33% 100%,
                        0% 100%,
                        0% 80%,
                        0% 80%);
            }
        }
    </style>
</head>

<body>
    <div class="pic change1_2">
        <div class="circle">
        </div>
    </div>
    <div class="sensor"></div>


    <script>
        (function () {

            window.addEventListener('click', function () {                
                if (document.querySelector('.pic').classList.contains('change1_2')) {
                    document.querySelector('.pic').classList.remove('change1_2')
                    document.querySelector('.pic').classList.add('change2_3')
                } else if(document.querySelector('.pic').classList.contains('change2_3')) {
                    document.querySelector('.pic').classList.remove('change2_3')
                    document.querySelector('.pic').classList.add('change3_1')
                } else if(document.querySelector('.pic').classList.contains('change3_1')) {
                    document.querySelector('.pic').classList.remove('change3_1')
                    document.querySelector('.pic').classList.add('change1_2')
                }  else {
                    document.querySelector('.pic').classList.remove('change1_2')
                }
            })

            let mousse_in = false
            let sensor = document.querySelector('.sensor')
            let mask = document.querySelector('.circle')
            
            let orgin_x = mask.offsetLeft;
            let orgin_y = mask.offsetTop;

            sensor.addEventListener('mousemove',function(e){
                mousse_in = true
                let [x,y] = [e.offsetX,e.offsetY]
                // console.log([x,y])

                // mask.style.left=x + "px"
                // mask.style.top=y + "px"

                
                mask.style.left= orgin_x + (x-300)*0.2 + "px"
                mask.style.top=orgin_y + (y-300)*0.2 + "px"


                
                // mask.offsetX = x




                // document.querySelector('.circle').style.left = x +"px";
                // document.querySelector('.circle').style.top = y +"px";
                // console.log(document.querySelector('.circle'))
            })

            sensor.addEventListener('mouseout',function(e){
                mousse_in = false
                x = 0
                y = 0
            })

            
        })()
    </script>
</body>

</html>